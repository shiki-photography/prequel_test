<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>prequel_hp</title>
</head>

<body><!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>prequel. | フォトウェディング — 前日譚</title>
  <meta name="description" content="prequel.（プリクエル）— 結婚式を挙げないと決めたふたりへ。原点回帰wedding。ふたりの前日譚を、自然光で、装飾を排し、美しく。カジュアル/ドレスアップの2プラン。オプションを選びながら概算見積り→メール/LINEで相談まで。">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Noto+Serif+JP:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#fff;--text:#161616;--muted:#636a71;--line:#e7e7ea;--accent:#2b705e;--accent2:#20584a}
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:"Noto Serif JP",serif;letter-spacing:.02em}
    img{max-width:100%;display:block}
    a{color:inherit;text-decoration:none}
    .container{max-width:1120px;margin:0 auto;padding:0 20px}
    header{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.9);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid var(--line)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{font-family:"Playfair Display",serif;font-weight:700;letter-spacing:.06em}
    .brand small{display:block;font-weight:400;font-size:12px;color:var(--muted);letter-spacing:.12em}
    .nav a{padding:8px 10px;color:#394047;font-size:14px}
    .hero{border-bottom:1px solid var(--line)}
    .heroWrap{display:grid;gap:24px;grid-template-columns:1fr}
    .heroMedia{aspect-ratio:4/5;background:#d7d7dc;border-radius:18px;overflow:hidden}
    .heroCopy .kicker{letter-spacing:.18em;color:var(--muted);font-size:12px;text-transform:uppercase}
    h1{font-family:"Playfair Display",serif;font-size:36px;line-height:1.25;margin:10px 0}
    .tag{color:#334155}
    .btn{display:inline-block;padding:12px 16px;border-radius:12px;border:1px solid var(--line)}
    .btn.primary{background:var(--accent);color:#fff;border-color:transparent}
    .btn.primary:hover{background:var(--accent2)}
    section{padding:64px 0;border-bottom:1px solid var(--line)}
    h2{font-family:"Playfair Display",serif;font-size:28px;margin:0 0 10px}
    .grid{display:grid;gap:18px}
    .cols-2{grid-template-columns:1fr}
    .cols-3{grid-template-columns:1fr}
    @media(min-width:900px){.heroWrap{grid-template-columns:1.05fr .95fr}.cols-2{grid-template-columns:1fr 1fr}.cols-3{grid-template-columns:repeat(3,1fr)}}
    .card{border:1px solid var(--line);border-radius:14px;background:#fff;overflow:hidden}
    .card .body{padding:16px}
    .muted{color:var(--muted)}
    .pill{display:inline-block;border:1px solid var(--line);padding:4px 10px;border-radius:999px;font-size:12px;color:#334155}
    ul.clean{list-style:none;margin:0;padding:0}
    ul.clean li{padding:6px 0;border-bottom:1px dashed var(--line)}
    ul.clean li:last-child{border-bottom:none}
    .row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .price{font-weight:700}
    .opt{padding:14px;border:1px solid var(--line);border-radius:12px}
    .opt.checked{border-color:var(--accent);background:#eff6f5}
    .qty{display:flex;align-items:center;gap:6px}
    .qty button{width:28px;height:28px;border:1px solid #cfd3d7;border-radius:8px;background:#fff}
    textarea,input[type="text"],input[type="number"],select{width:100%;padding:12px;border:1px solid #cfd3d7;border-radius:12px;font-family:inherit}
    .foot{padding:36px 0}
    .note{font-size:12px;color:var(--muted)}
    .accent{color:var(--accent)}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div>
        <a href="#" class="brand">prequel.<small>before the vows, there was us.</small></a>
      </div>
      <nav>
        <a href="#concept">Concept</a>
        <a href="#plans">Plans</a>
        <a href="#build">Build</a>
        <a href="#estimate">Estimate</a>
        <a href="#contact" class="btn primary" style="padding:8px 14px">Contact</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="container heroWrap" style="padding:32px 0 48px">
        <div class="heroCopy">
          <div class="kicker">Unconventional Love Story Photography</div>
          <h1>結婚式を挙げないと決めたふたりへ。</h1>
          <p class="tag">ふたりの原点に立ち返り、前日譚を写す。演出や装飾を排し、ファッションポートレートのように、自然体の一瞬を美しく。</p>
          <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
            <a class="btn primary" href="#build">撮影内容を組み立てる</a>
            <a class="btn" href="#plans">プランを見る</a>
          </div>
        </div>
        <div class="heroMedia">
          <img src="https://images.unsplash.com/photo-1522673607200-164d1b6ce486?q=80&w=1600&auto=format&fit=crop" alt="prequel hero" style="width:100%;height:100%;object-fit:cover">
        </div>
      </div>
    </section>

    <!-- CONCEPT -->
    <section id="concept">
      <div class="container cols-2 grid">
        <div>
          <h2>Concept — prequel.</h2>
          <p><em>Unconventional Love Story Photography</em>（伝統にとらわれないラブストーリー写真）。ふたりの始まり。原点。ふたりの人生が出会い、始まった場所を背景に、ふたりの想いを生々しく、美しく描写するドキュメンタリー。演出や装飾を取り払い、ファッションポートレートのようなスナップ中心のフォトを。</p>
        </div>
        <div class="card">
          <div class="body">
            <div class="pill">原点回帰wedding</div>
            <ul class="clean" style="margin-top:10px">
              <li>必ず<em>生花</em>を使用（Urumusu 提携）</li>
              <li>現役ウェディングHMUA & スタイリストによるトータルコーデ</li>
              <li>白基調、上質・上品・尖っていて派手じゃない</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- PLANS -->
    <section id="plans">
      <div class="container">
        <h2>撮影プラン</h2>
        <div class="grid cols-2" id="planList"></div>
      </div>
    </section>

    <!-- BUILD -->
    <section id="build">
      <div class="container">
        <h2>撮影内容を選ぶ</h2>
        <div id="groups"></div>
        <div style="margin-top:18px">
          <label class="muted" for="notes">ご要望・イメージ（任意）</label>
          <textarea id="notes" rows="4" placeholder="原点の場所（出会い、はじまり）／好きな色・花／リンクコーデ or ドレスの方向性 など"></textarea>
        </div>
      </div>
    </section>

    <!-- ESTIMATE -->
    <section id="estimate">
      <div class="container cols-2 grid">
        <div>
          <h2>概算見積り</h2>
          <div class="card"><div class="body" id="summary"></div></div>
          <p class="note" style="margin-top:8px">※ 交通費・施設使用料・シーズン料・税等は別途となる場合があります。正式見積りはヒアリング後にご提示します。</p>
        </div>
        <div>
          <div class="grid" style="gap:10px">
            <button id="btnMail" class="btn primary" style="width:100%">メールで見積りを依頼</button>
            <button id="btnLine" class="btn" style="width:100%;border-color:var(--accent);color:var(--accent)">LINEで見積りを送る</button>
            <a class="btn" href="#build" style="width:100%">内容を調整する</a>
            <p class="note">※ メール/LINEいずれも送信前に内容を編集できます。LINEはスマホアプリ推奨。</p>
        </div>
        </div>
      </div>
    </section>

    <!-- CONTACT / FOOTER -->
    <section id="contact" class="foot">
      <div class="container cols-2 grid">
        <div>
          <div class="brand" style="font-family:Playfair Display,serif;font-size:22px">prequel.<div class="muted" style="font-size:12px">before the vows, there was us.</div></div>
          <p class="muted" style="margin-top:10px">Instagram / LINE / Mail をご利用ください。</p>
        </div>
        <div style="text-align:right">
          <a class="accent" href="#">Instagram</a>
          <span class="muted"> / </span>
          <a class="accent" href="#">LINE</a>
          <span class="muted"> / </span>
          <a class="accent" href="#">Mail</a>
        </div>
      </div>
    </section>
  </main>

  <script>
  // ====== 設定（必要に応じて編集してください） ======
  const MAIL_TO = "hello@prequel.example"; // ← あなたのメールに変更
  const LINE_TEXT_PREFIX = "【prequel. 見積りリクエスト】\n"; // 任意

  // プラン
  const PLANS = [
    {
      id: "casual",
      label: "カジュアルプラン",
      subtitle: "コーディネートからサポートする私服撮影",
      basePrice: 88000,
      includes: ["私服コーデ相談（オンライン30分）","撮影 90分（スナップ中心）","基本レタッチ 40枚"],
    },
    {
      id: "dress",
      label: "ドレスアッププラン",
      subtitle: "ウェディングドレスでのフォトウェディング",
      basePrice: 148000,
      includes: ["事前カウンセリング（オンライン45分）","撮影 120分（ポートレート＋スナップ）","基本レタッチ 60枚"],
    },
  ];

  // オプショングループ
  const GROUPS = [
    { id: "hmua", label: "ヘアメイク & スタイリング" },
    { id: "flowers", label: "生花・ブーケ" },
    { id: "wardrobe", label: "衣装・アクセサリー" },
    { id: "location", label: "ロケーション" },
    { id: "delivery", label: "納品・オプション" },
  ];

  // オプション
  const CATALOG = [
    { id: "hmua_basic", group: "hmua", label: "ヘア＆メイク（1スタイル）", description: "現役ウェディングHMUAによるトータルコーデ", priceType: "fixed", price: 22000, featured: true },
    { id: "hmua_touchup", group: "hmua", label: "当日リタッチ（〜2時間）", priceType: "per_hour", price: 6000, minQty:1, maxQty:3, step:1, defaultQty:1 },

    { id: "bouquet_fresh", group: "flowers", label: "ブーケ（生花）", description:"必ず生花を使用。Urumusu提携。", priceType: "fixed", price: 25300, featured:true },
    { id: "boutonniere", group: "flowers", label: "ブートニア（生花）", priceType: "fixed", price: 6600 },

    { id: "dress_rental", group: "wardrobe", label: "ウェディングドレス（レンタル）", description:"Dress genic / Lovemydress 他", priceType: "fixed", price: 55000, featured:true },
    { id: "mini_dress", group: "wardrobe", label: "ミニ丈ドレス", priceType: "fixed", price: 33000 },
    { id: "men_set", group: "wardrobe", label: "メンズセットアップ（レンタル）", priceType: "fixed", price: 22000 },
    { id: "acc_earring", group: "wardrobe", label: "イヤリング / リボン / チョーカー", priceType: "fixed", price: 8800 },
    { id: "winter_set", group: "wardrobe", label: "冬小物（黒ベレー＋黒グローブ）", priceType: "fixed", price: 7700 },

    { id: "loc_single", group: "location", label: "ロケ地追加（1箇所）", priceType: "fixed", price: 11000 },
    { id: "travel_fee", group: "location", label: "出張費（札幌市内→道内）", description:"エリア係数×距離で算定（暫定）", priceType: "per_unit", price: 5500, minQty:0, maxQty:8, step:1, defaultQty:0 },

    { id: "zine", group: "delivery", label: "フォトブック（ZINE）", priceType: "fixed", price: 17600 },
    { id: "exp_delivery", group: "delivery", label: "特急仕上げ（+7営業日短縮）", priceType: "fixed", price: 9900 },
  ];

  // ====== 状態 ======
  let state = {
    planId: "casual",
    selected: {}, // { optionId: {checked:Boolean, qty:Number}}
    notes: "",
  };

  // ====== ユーティリティ ======
  const yen = (n)=> new Intl.NumberFormat('ja-JP',{style:'currency',currency:'JPY'}).format(n||0);
  function lineTotal(item, qty){
    if(item.priceType==='fixed') return item.price;
    const q = (qty==null?1:qty);
    return item.price * q;
  }
  function getPlan(){ return PLANS.find(p=>p.id===state.planId); }
  function selectedEntries(){ return Object.entries(state.selected).filter(([,s])=>s.checked); }
  function optionsSubtotal(){
    return selectedEntries().reduce((acc,[id,s])=>{
      const item = CATALOG.find(c=>c.id===id); if(!item) return acc;
      return acc + lineTotal(item, s.qty);
    },0);
  }

  // ====== レンダリング ======
  function renderPlans(){
    const wrap = document.getElementById('planList');
    wrap.innerHTML = '';
    PLANS.forEach(p=>{
      const is = (p.id===state.planId);
      const div = document.createElement('button');
      div.type = 'button';
      div.setAttribute('aria-pressed', is);
      div.style.textAlign='left';
      div.className = 'card';
      div.innerHTML = `<div class="body">
        <div class="row">
          <div>
            <div class="price" style="font-family:Playfair Display,serif;font-size:20px">${p.label}</div>
            <div class="muted" style="font-size:14px">${p.subtitle}</div>
          </div>
          <div class="price">${yen(p.basePrice)}</div>
        </div>
        <ul class="clean" style="margin-top:8px">${p.includes.map(x=>`<li>${x}</li>`).join('')}</ul>
      </div>`;
      div.onclick = ()=>{ state.planId = p.id; renderPlans(); renderSummary(); };
      if(is){ div.style.borderColor='var(--accent)'; div.style.background='#eff6f5'; }
      wrap.appendChild(div);
    });
  }

  function renderGroups(){
    const root = document.getElementById('groups');
    root.innerHTML = '';
    GROUPS.forEach(g=>{
      const box = document.createElement('div');
      box.style.marginTop = '22px';
      const h = document.createElement('h3');
      h.textContent = g.label; h.style.fontFamily='Playfair Display,serif'; h.style.fontSize='22px';
      box.appendChild(h);

      const grid = document.createElement('div');
      grid.className = 'grid cols-2'; grid.style.marginTop='10px';

      CATALOG.filter(c=>c.group===g.id).forEach(item=>{
        const is = !!(state.selected[item.id] && state.selected[item.id].checked);
        const qty = (state.selected[item.id] && state.selected[item.id].qty) ?? item.defaultQty ?? 1;
        const card = document.createElement('div');
        card.className = 'opt'+(is?' checked':'');
        card.innerHTML = `
          <div class="row">
            <div>
              <div class="price" style="font-weight:600">${item.label}</div>
              ${item.description?`<div class="muted" style="font-size:12px;margin-top:4px">${item.description}</div>`:''}
            </div>
            <div class="price">${item.priceType==='fixed'? yen(item.price) : `${yen(item.price)} / ${(item.priceType==='per_hour'?'h':'unit')}`}</div>
          </div>
          <div class="row" style="margin-top:10px">
            <label style="display:flex;align-items:center;gap:8px;font-size:14px">
              <input type="checkbox" ${is?'checked':''} data-opt="${item.id}"> 選択
            </label>
            ${item.priceType!=='fixed' && is?`
              <div class="qty">
                <button data-minus="${item.id}">−</button>
                <span style="width:30px;text-align:center" aria-live="polite">${qty}</span>
                <button data-plus="${item.id}">＋</button>
              </div>
            `:''}
          </div>
        `;
        // events
        card.querySelector('input[type="checkbox"]').addEventListener('change', (e)=>{
          const checked = e.target.checked;
          const prev = state.selected[item.id] || {};
          state.selected[item.id] = { checked, qty: checked ? (prev.qty ?? item.defaultQty ?? 1) : undefined };
          renderGroups(); renderSummary();
        });
        const minusBtn = card.querySelector(`[data-minus="${item.id}"]`);
        const plusBtn = card.querySelector(`[data-plus="${item.id}"]`);
        if(minusBtn){ minusBtn.addEventListener('click', ()=>changeQty(item, -1)); }
        if(plusBtn){ plusBtn.addEventListener('click', ()=>changeQty(item, +1)); }
        grid.appendChild(card);
      });

      box.appendChild(grid);
      root.appendChild(box);
    });

    document.getElementById('notes').addEventListener('input', (e)=>{ state.notes = e.target.value; });
  }

  function changeQty(item, delta){
    const cur = state.selected[item.id] || { checked:true, qty: item.defaultQty ?? 1 };
    let q = (cur.qty ?? 1) + delta;
    if(item.minQty!=null) q = Math.max(item.minQty, q);
    if(item.maxQty!=null) q = Math.min(item.maxQty, q);
    state.selected[item.id] = { checked:true, qty:q };
    renderGroups(); renderSummary();
  }

  function buildEstimateText(){
    const plan = getPlan();
    const chosenLines = selectedEntries().map(([id,s])=>{
      const item = CATALOG.find(c=>c.id===id);
      const qty = s.qty ?? 1;
      return `${item.label}${item.priceType!=='fixed'?` x${qty}`:''} — ${yen(lineTotal(item, qty))}`;
    });
    const total = plan.basePrice + optionsSubtotal();
    return `プラン: ${plan.label}（${yen(plan.basePrice)}）\n`+
           `オプション:\n${chosenLines.join('\n') || 'なし'}\n\n`+
           `ご要望:\n${state.notes || '（未入力）'}\n\n`+
           `概算合計: ${yen(total)}（税込想定）`;
  }

  function renderSummary(){
    const plan = getPlan();
    const sumEl = document.getElementById('summary');
    const options = selectedEntries().map(([id,s])=>{
      const item = CATALOG.find(c=>c.id===id); const qty = s.qty ?? 1;
      return `<div class="row" style="font-size:14px"><span>${item.label}${item.priceType!=='fixed'?` <span class="muted">×${qty}</span>`:''}</span><span class="price">${yen(lineTotal(item, qty))}</span></div>`;
    }).join('');
    const total = getPlan().basePrice + optionsSubtotal();

    sumEl.innerHTML = `
      <div class="row">
        <div>
          <div style="font-family:Playfair Display,serif;font-size:20px">${plan.label}</div>
          <div class="muted" style="font-size:14px">${plan.subtitle}</div>
        </div>
        <div class="price">${yen(plan.basePrice)}</div>
      </div>
      <div style="margin-top:10px">${options || '<div class="muted" style="font-size:14px">オプション未選択</div>'}</div>
      <div class="row" style="margin-top:12px;padding-top:10px;border-top:1px solid var(--line)">
        <div class="muted">小計（プラン＋オプション）</div>
        <div class="price">${yen(total)}</div>
      </div>`;
  }

  // ====== 送信ボタン ======
  function submitEmail(){
    const subject = encodeURIComponent(`prequel. 見積りリクエスト — ${getPlan().label}`);
    const body = encodeURIComponent(buildEstimateText());
    location.href = `mailto:${MAIL_TO}?subject=${subject}&body=${body}`;
  }
  function submitLINE(){
    const text = encodeURIComponent(LINE_TEXT_PREFIX + buildEstimateText());
    const mobile = `line://msg/text/${text}`;
    const web = `https://line.me/R/msg/text/?${text}`;
    const w = window.open(mobile, '_blank');
    setTimeout(()=>{ if(!w || w.closed) window.open(web, '_blank'); }, 300);
  }

  // ====== 初期化 ======
  document.addEventListener('DOMContentLoaded', ()=>{
    renderPlans();
    renderGroups();
    renderSummary();
    document.getElementById('btnMail').addEventListener('click', submitEmail);
    document.getElementById('btnLine').addEventListener('click', submitLINE);
  });
  </script>
</body>
</html>
</body>
</html>
